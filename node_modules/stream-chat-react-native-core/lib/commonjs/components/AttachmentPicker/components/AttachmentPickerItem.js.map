{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_bottomSheet","_dayjs","_mimeTypes","_ThemeContext","_useViewport3","_icons","_native","_this","_jsxFileName","AttachmentVideo","props","asset","ImageOverlaySelectedComponent","maxNumberOfFiles","numberOfAttachmentPickerImageColumns","numberOfUploads","selected","selectedFiles","setSelectedFiles","_useViewport","useViewport","vw","_useTheme","useTheme","_useTheme$theme","theme","_useTheme$theme$attac","attachmentPicker","durationText","image","imageOverlay","_useTheme$theme$color","colors","overlay","white","videoDuration","duration","uri","ONE_HOUR_IN_SECONDS","durationLabel","isDurationLongerThanHour","formattedDurationParam","formattedVideoDuration","dayjs","format","size","patchVideoFile","_ref","_asyncToGenerator2","_regenerator","mark","_callee","files","localAssetURI","mimeType","wrap","_callee$","_context","prev","next","t0","Platform","OS","id","getLocalAssetUri","sent","lookup","name","abrupt","concat","_toConsumableArray2","stop","_x","apply","arguments","updateSelectedFiles","_ref2","_callee2","_callee2$","_context2","Alert","alert","onPressVideo","filter","file","createElement","TouchableOpacity","onPress","__self","__source","fileName","lineNumber","columnNumber","ImageBackground","source","style","height","margin","width","View","styles","backgroundColor","videoView","Recorder","pathFill","Text","color","AttachmentImage","selectedImages","setSelectedImages","_useTheme2","_useTheme2$theme","_useTheme2$theme$atta","_useViewport2","patchImageFile","_ref3","_callee3","images","_callee3$","_context3","_extends2","_x2","updateSelectedImages","_ref4","_callee4","_callee4$","_context4","onPressImage","renderAttachmentPickerItem","_ref5","item","isVideoType","type","includes","exports","StyleSheet","create","fontWeight","alignItems","flex","bottom","display","flexDirection","justifyContent","paddingHorizontal","position"],"sources":["AttachmentPickerItem.tsx"],"sourcesContent":["import React from 'react';\n\nimport { Alert, ImageBackground, Platform, StyleSheet, Text, View } from 'react-native';\n\nimport { TouchableOpacity } from '@gorhom/bottom-sheet';\nimport dayjs from 'dayjs';\nimport { lookup } from 'mime-types';\n\nimport type { AttachmentPickerContextValue } from '../../../contexts/attachmentPickerContext/AttachmentPickerContext';\nimport { useTheme } from '../../../contexts/themeContext/ThemeContext';\nimport { useViewport } from '../../../hooks/useViewport';\nimport { Recorder } from '../../../icons';\nimport { getLocalAssetUri } from '../../../native';\nimport type { Asset, File } from '../../../types/types';\n\ntype AttachmentPickerItemType = Pick<\n  AttachmentPickerContextValue,\n  'selectedFiles' | 'setSelectedFiles' | 'setSelectedImages' | 'selectedImages' | 'maxNumberOfFiles'\n> & {\n  asset: Asset;\n  ImageOverlaySelectedComponent: React.ComponentType;\n  numberOfUploads: number;\n  selected: boolean;\n  numberOfAttachmentPickerImageColumns?: number;\n};\n\ntype AttachmentImageProps = Omit<AttachmentPickerItemType, 'setSelectedFiles' | 'selectedFiles'>;\n\ntype AttachmentVideoProps = Omit<AttachmentPickerItemType, 'setSelectedImages' | 'selectedImages'>;\n\nconst AttachmentVideo: React.FC<AttachmentVideoProps> = (props) => {\n  const {\n    asset,\n    ImageOverlaySelectedComponent,\n    maxNumberOfFiles,\n    numberOfAttachmentPickerImageColumns,\n    numberOfUploads,\n    selected,\n    selectedFiles,\n    setSelectedFiles,\n  } = props;\n  const { vw } = useViewport();\n\n  const {\n    theme: {\n      attachmentPicker: { durationText, image, imageOverlay },\n      colors: { overlay, white },\n    },\n  } = useTheme();\n\n  const { duration: videoDuration, uri } = asset;\n\n  const ONE_HOUR_IN_SECONDS = 3600;\n\n  let durationLabel = '00:00';\n\n  if (videoDuration) {\n    const isDurationLongerThanHour = videoDuration / ONE_HOUR_IN_SECONDS >= 1;\n    const formattedDurationParam = isDurationLongerThanHour ? 'HH:mm:ss' : 'mm:ss';\n    const formattedVideoDuration = dayjs\n      .duration(videoDuration, 'second')\n      .format(formattedDurationParam);\n    durationLabel = formattedVideoDuration;\n  }\n\n  const size = vw(100) / (numberOfAttachmentPickerImageColumns || 3) - 2;\n\n  /* Patches video files with uri and mimetype */\n  const patchVideoFile = async (files: File[]) => {\n    // For the case of Expo CLI where you need to fetch the file uri from file id. Here it is only done for iOS since for android the file.uri is fine.\n    const localAssetURI = Platform.OS === 'ios' && asset.id && (await getLocalAssetUri(asset.id));\n    const uri = localAssetURI || asset.uri || '';\n    // We need a mime-type to upload a video file.\n    const mimeType = lookup(asset.name) || 'multipart/form-data';\n    return [\n      ...files,\n      {\n        duration: asset.duration,\n        id: asset.id,\n        mimeType,\n        name: asset.name,\n        size: asset.size,\n        uri,\n      },\n    ];\n  };\n\n  const updateSelectedFiles = async () => {\n    if (numberOfUploads >= maxNumberOfFiles) {\n      Alert.alert('Maximum number of files reached');\n      return;\n    }\n    const files = await patchVideoFile(selectedFiles);\n    setSelectedFiles(files);\n  };\n\n  const onPressVideo = () => {\n    if (selected) {\n      setSelectedFiles((files) =>\n        // `id` is available for Expo MediaLibrary while Cameraroll doesn't share id therefore we use `uri`\n        files.filter((file) => (file.id ? file.id !== asset.id : file.uri !== asset.uri)),\n      );\n    } else {\n      updateSelectedFiles();\n    }\n  };\n\n  return (\n    <TouchableOpacity onPress={onPressVideo}>\n      <ImageBackground\n        source={{ uri }}\n        style={[\n          {\n            height: size,\n            margin: 1,\n            width: size,\n          },\n          image,\n        ]}\n      >\n        {selected && (\n          <View style={[styles.overlay, { backgroundColor: overlay }, imageOverlay]}>\n            <ImageOverlaySelectedComponent />\n          </View>\n        )}\n        <View style={styles.videoView}>\n          <Recorder height={20} pathFill={white} width={25} />\n          {videoDuration ? (\n            <Text style={[styles.durationText, durationText, { color: white }]}>\n              {durationLabel}\n            </Text>\n          ) : null}\n        </View>\n      </ImageBackground>\n    </TouchableOpacity>\n  );\n};\n\nconst AttachmentImage: React.FC<AttachmentImageProps> = (props) => {\n  const {\n    asset,\n    ImageOverlaySelectedComponent,\n    maxNumberOfFiles,\n    numberOfAttachmentPickerImageColumns,\n    numberOfUploads,\n    selected,\n    selectedImages,\n    setSelectedImages,\n  } = props;\n  const {\n    theme: {\n      attachmentPicker: { image, imageOverlay },\n      colors: { overlay },\n    },\n  } = useTheme();\n  const { vw } = useViewport();\n\n  const size = vw(100) / (numberOfAttachmentPickerImageColumns || 3) - 2;\n\n  const { uri } = asset;\n\n  /* Patches image files with uri */\n  const patchImageFile = async (images: Asset[]) => {\n    // For the case of Expo CLI where you need to fetch the file uri from file id. Here it is only done for iOS since for android the file.uri is fine.\n    const localAssetURI = Platform.OS === 'ios' && asset.id && (await getLocalAssetUri(asset.id));\n    const uri = localAssetURI || asset.uri || '';\n    return [\n      ...images,\n      {\n        ...asset,\n        uri,\n      },\n    ];\n  };\n\n  const updateSelectedImages = async () => {\n    if (numberOfUploads >= maxNumberOfFiles) {\n      Alert.alert('Maximum number of files reached');\n      return;\n    }\n    const images = await patchImageFile(selectedImages);\n    setSelectedImages(images);\n  };\n\n  const onPressImage = () => {\n    if (selected) {\n      // `id` is available for Expo MediaLibrary while Cameraroll doesn't share id therefore we use `uri`\n      setSelectedImages((images) =>\n        images.filter((image) => (image.id ? image.id !== asset.id : image.uri !== asset.uri)),\n      );\n    } else {\n      updateSelectedImages();\n    }\n  };\n\n  return (\n    <TouchableOpacity onPress={onPressImage}>\n      <ImageBackground\n        source={{ uri }}\n        style={[\n          {\n            height: size,\n            margin: 1,\n            width: size,\n          },\n          image,\n        ]}\n      >\n        {selected && (\n          <View style={[styles.overlay, { backgroundColor: overlay }, imageOverlay]}>\n            <ImageOverlaySelectedComponent />\n          </View>\n        )}\n      </ImageBackground>\n    </TouchableOpacity>\n  );\n};\n\nexport const renderAttachmentPickerItem = ({ item }: { item: AttachmentPickerItemType }) => {\n  const {\n    asset,\n    ImageOverlaySelectedComponent,\n    maxNumberOfFiles,\n    numberOfAttachmentPickerImageColumns,\n    numberOfUploads,\n    selected,\n    selectedFiles,\n    selectedImages,\n    setSelectedFiles,\n    setSelectedImages,\n  } = item;\n\n  /**\n   * Expo Media Library - Result of asset type\n   * Native Android - Gives mime type(Eg: image/jpeg, video/mp4, etc.)\n   * Native iOS - Gives `image` or `video`\n   * Expo Android/iOS - Gives `photo` or `video`\n   **/\n  const isVideoType = asset.type.includes('video');\n\n  if (isVideoType) {\n    return (\n      <AttachmentVideo\n        asset={asset}\n        ImageOverlaySelectedComponent={ImageOverlaySelectedComponent}\n        maxNumberOfFiles={maxNumberOfFiles}\n        numberOfAttachmentPickerImageColumns={numberOfAttachmentPickerImageColumns}\n        numberOfUploads={numberOfUploads}\n        selected={selected}\n        selectedFiles={selectedFiles}\n        setSelectedFiles={setSelectedFiles}\n      />\n    );\n  }\n\n  return (\n    <AttachmentImage\n      asset={asset}\n      ImageOverlaySelectedComponent={ImageOverlaySelectedComponent}\n      maxNumberOfFiles={maxNumberOfFiles}\n      numberOfAttachmentPickerImageColumns={numberOfAttachmentPickerImageColumns}\n      numberOfUploads={numberOfUploads}\n      selected={selected}\n      selectedImages={selectedImages}\n      setSelectedImages={setSelectedImages}\n    />\n  );\n};\n\nconst styles = StyleSheet.create({\n  durationText: {\n    fontWeight: 'bold',\n  },\n  overlay: {\n    alignItems: 'flex-end',\n    flex: 1,\n  },\n  videoView: {\n    bottom: 5,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingHorizontal: 5,\n    position: 'absolute',\n    width: '100%',\n  },\n});\n"],"mappings":"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"}