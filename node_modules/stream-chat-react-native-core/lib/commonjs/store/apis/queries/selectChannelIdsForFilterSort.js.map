{"version":3,"names":["_QuickSqliteClient","require","_createSelectQuery","_convertFilterSortToQuery","selectChannelIdsForFilterSort","_ref","_results$","filters","sort","query","convertFilterSortToQuery","QuickSqliteClient","logger","results","executeSql","apply","createSelectQuery","id","channelIdsStr","cids","JSON","parse","exports"],"sources":["selectChannelIdsForFilterSort.ts"],"sourcesContent":["import type { ChannelFilters, ChannelSort } from 'stream-chat';\n\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\nimport { QuickSqliteClient } from '../../QuickSqliteClient';\nimport { createSelectQuery } from '../../sqlite-utils/createSelectQuery';\n\nimport { convertFilterSortToQuery } from '../utils/convertFilterSortToQuery';\n\n/**\n * Gets the channel ids from database for given filter and sort query.\n *\n * @param {Object} param\n * @param {Object} param.filters Filters for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n * @param {Object} param.sort Sort for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n *\n * @returns Array of channel ids corresponding to filters & sort. Returns null if filters + sort query doesn't exist in \"channelQueries\" table.\n */\n\nexport const selectChannelIdsForFilterSort = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  filters,\n  sort,\n}: {\n  filters?: ChannelFilters<StreamChatGenerics>;\n  sort?: ChannelSort<StreamChatGenerics>;\n}): string[] | null => {\n  const query = convertFilterSortToQuery({ filters, sort });\n\n  QuickSqliteClient.logger?.('info', 'selectChannelIdsForFilterSort', {\n    query,\n  });\n\n  const results = QuickSqliteClient.executeSql.apply(\n    null,\n    createSelectQuery('channelQueries', ['*'], {\n      id: query,\n    }),\n  );\n\n  const channelIdsStr = results?.[0]?.cids;\n  return channelIdsStr ? JSON.parse(channelIdsStr) : null;\n};\n"],"mappings":";;;;AAGA,IAAAA,kBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AAEA,IAAAE,yBAAA,GAAAF,OAAA;AAYO,IAAMG,6BAA6B,GAAG,SAAhCA,6BAA6BA,CAAAC,IAAA,EAQnB;EAAA,IAAAC,SAAA;EAAA,IALrBC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IACPC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EAKJ,IAAMC,KAAK,GAAG,IAAAC,kDAAwB,EAAC;IAAEH,OAAO,EAAPA,OAAO;IAAEC,IAAI,EAAJA;EAAK,CAAC,CAAC;EAEzDG,oCAAiB,CAACC,MAAM,oBAAxBD,oCAAiB,CAACC,MAAM,CAAG,MAAM,EAAE,+BAA+B,EAAE;IAClEH,KAAK,EAALA;EACF,CAAC,CAAC;EAEF,IAAMI,OAAO,GAAGF,oCAAiB,CAACG,UAAU,CAACC,KAAK,CAChD,IAAI,EACJ,IAAAC,oCAAiB,EAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,EAAE;IACzCC,EAAE,EAAER;EACN,CAAC,CACH,CAAC;EAED,IAAMS,aAAa,GAAGL,OAAO,qBAAAP,SAAA,GAAPO,OAAO,CAAG,CAAC,CAAC,qBAAZP,SAAA,CAAca,IAAI;EACxC,OAAOD,aAAa,GAAGE,IAAI,CAACC,KAAK,CAACH,aAAa,CAAC,GAAG,IAAI;AACzD,CAAC;AAACI,OAAA,CAAAlB,6BAAA,GAAAA,6BAAA"}