{"version":3,"names":["_mapChannelDataToStorable","require","_QuickSqliteClient","_createUpsertQuery","upsertChannelData","_ref","channel","_ref$flush","flush","storableChannel","mapChannelDataToStorable","query","createUpsertQuery","QuickSqliteClient","logger","executeSqlBatch","exports"],"sources":["upsertChannelData.ts"],"sourcesContent":["import type { ChannelResponse } from 'stream-chat';\n\nimport { mapChannelDataToStorable } from '../mappers/mapChannelDataToStorable';\nimport { QuickSqliteClient } from '../QuickSqliteClient';\nimport { createUpsertQuery } from '../sqlite-utils/createUpsertQuery';\n\nexport const upsertChannelData = ({\n  channel,\n  flush = true,\n}: {\n  channel: ChannelResponse;\n  flush?: boolean;\n}) => {\n  const storableChannel = mapChannelDataToStorable(channel);\n  const query = createUpsertQuery('channels', storableChannel);\n  QuickSqliteClient.logger?.('info', 'upsertChannelData', {\n    channel: storableChannel,\n    flush,\n  });\n  if (flush) {\n    QuickSqliteClient.executeSqlBatch([query]);\n  }\n\n  return [query];\n};\n"],"mappings":";;;;AAEA,IAAAA,yBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AAEO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAC,IAAA,EAMxB;EAAA,IALJC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IAAAC,UAAA,GAAAF,IAAA,CACPG,KAAK;IAALA,KAAK,GAAAD,UAAA,cAAG,IAAI,GAAAA,UAAA;EAKZ,IAAME,eAAe,GAAG,IAAAC,kDAAwB,EAACJ,OAAO,CAAC;EACzD,IAAMK,KAAK,GAAG,IAAAC,oCAAiB,EAAC,UAAU,EAAEH,eAAe,CAAC;EAC5DI,oCAAiB,CAACC,MAAM,oBAAxBD,oCAAiB,CAACC,MAAM,CAAG,MAAM,EAAE,mBAAmB,EAAE;IACtDR,OAAO,EAAEG,eAAe;IACxBD,KAAK,EAALA;EACF,CAAC,CAAC;EACF,IAAIA,KAAK,EAAE;IACTK,oCAAiB,CAACE,eAAe,CAAC,CAACJ,KAAK,CAAC,CAAC;EAC5C;EAEA,OAAO,CAACA,KAAK,CAAC;AAChB,CAAC;AAACK,OAAA,CAAAZ,iBAAA,GAAAA,iBAAA"}