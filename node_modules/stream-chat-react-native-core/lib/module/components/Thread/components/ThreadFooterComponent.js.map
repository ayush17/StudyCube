{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactNativeSvg","_interopRequireWildcard","_MessagesContext","_ThemeContext","_ThreadContext","_TranslationContext","_useViewport2","_excluded","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","styles","StyleSheet","create","absolute","position","messagePadding","paddingHorizontal","newThread","alignItems","height","justifyContent","marginTop","text","fontSize","textAlign","threadHeaderContainer","marginVertical","ThreadFooterComponentWithContext","props","_newThread$height","_newThread$height2","_newThread$height3","Message","thread","_useTranslationContex","useTranslationContext","t","_useViewport","useViewport","vw","_useTheme","useTheme","_useTheme$theme","theme","_useTheme$theme$color","colors","bg_gradient_end","bg_gradient_start","grey","_useTheme$theme$threa","backgroundGradientStart","backgroundGradientStop","_objectWithoutProperties2","replyCount","reply_count","createElement","View","style","testID","__self","__source","fileName","lineNumber","columnNumber","groupStyles","message","preventPress","threadList","width","Rect","fill","x","y","Defs","LinearGradient","gradientUnits","id","x1","x2","y1","y2","Stop","offset","stopColor","stopOpacity","Text","color","areEqual","prevProps","nextProps","prevThread","nextThread","threadEqual","latestReactionsEqual","Array","isArray","latest_reactions","length","every","_ref","index","_nextThread$latest_re","type","MemoizedThreadFooter","React","memo","ThreadFooterComponent","_useMessagesContext","useMessagesContext","_useThreadContext","useThreadContext","exports"],"sources":["ThreadFooterComponent.tsx"],"sourcesContent":["import React from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\nimport Svg, { Defs, LinearGradient, Rect, Stop } from 'react-native-svg';\n\nimport {\n  MessagesContextValue,\n  useMessagesContext,\n} from '../../../contexts/messagesContext/MessagesContext';\nimport { useTheme } from '../../../contexts/themeContext/ThemeContext';\nimport {\n  ThreadContextValue,\n  useThreadContext,\n} from '../../../contexts/threadContext/ThreadContext';\nimport { useTranslationContext } from '../../../contexts/translationContext/TranslationContext';\nimport { useViewport } from '../../../hooks/useViewport';\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\n\nconst styles = StyleSheet.create({\n  absolute: { position: 'absolute' },\n  messagePadding: {\n    paddingHorizontal: 8,\n  },\n  newThread: {\n    alignItems: 'center',\n    height: 24,\n    justifyContent: 'center',\n    marginTop: 8,\n  },\n  text: {\n    fontSize: 12,\n    textAlign: 'center',\n  },\n  threadHeaderContainer: {\n    marginVertical: 8,\n  },\n});\n\ntype ThreadFooterComponentPropsWithContext<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Pick<MessagesContextValue<StreamChatGenerics>, 'Message'> &\n  Pick<ThreadContextValue<StreamChatGenerics>, 'thread'>;\n\nconst ThreadFooterComponentWithContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: ThreadFooterComponentPropsWithContext<StreamChatGenerics>,\n) => {\n  const { Message, thread } = props;\n  const { t } = useTranslationContext();\n  const { vw } = useViewport();\n\n  const {\n    theme: {\n      colors: { bg_gradient_end, bg_gradient_start, grey },\n      thread: {\n        newThread: { backgroundGradientStart, backgroundGradientStop, text, ...newThread },\n      },\n    },\n  } = useTheme();\n\n  if (!thread) return null;\n\n  const replyCount = thread.reply_count;\n\n  return (\n    <View style={styles.threadHeaderContainer} testID='thread-footer-component'>\n      <View style={styles.messagePadding}>\n        <Message groupStyles={['single']} message={thread} preventPress threadList />\n      </View>\n      <View style={[styles.newThread, newThread]}>\n        <Svg height={newThread.height ?? 24} style={styles.absolute} width={vw(100)}>\n          <Rect fill='url(#gradient)' height={newThread.height ?? 24} width={vw(100)} x={0} y={0} />\n          <Defs>\n            <LinearGradient\n              gradientUnits='userSpaceOnUse'\n              id='gradient'\n              x1={0}\n              x2={0}\n              y1={0}\n              y2={newThread.height ?? 24}\n            >\n              <Stop\n                offset={1}\n                stopColor={backgroundGradientStart || bg_gradient_end}\n                stopOpacity={1}\n              />\n              <Stop\n                offset={0}\n                stopColor={backgroundGradientStop || bg_gradient_start}\n                stopOpacity={1}\n              />\n            </LinearGradient>\n          </Defs>\n        </Svg>\n        <Text style={[styles.text, { color: grey }, text]}>\n          {replyCount === 1\n            ? t('1 Reply')\n            : t('{{ replyCount }} Replies', {\n                replyCount,\n              })}\n        </Text>\n      </View>\n    </View>\n  );\n};\n\nconst areEqual = <StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics>(\n  prevProps: ThreadFooterComponentPropsWithContext<StreamChatGenerics>,\n  nextProps: ThreadFooterComponentPropsWithContext<StreamChatGenerics>,\n) => {\n  const { thread: prevThread } = prevProps;\n  const { thread: nextThread } = nextProps;\n\n  const threadEqual =\n    prevThread?.id === nextThread?.id &&\n    prevThread?.text === nextThread?.text &&\n    prevThread?.reply_count === nextThread?.reply_count;\n  if (!threadEqual) return false;\n\n  const latestReactionsEqual =\n    prevThread &&\n    nextThread &&\n    Array.isArray(prevThread.latest_reactions) &&\n    Array.isArray(nextThread.latest_reactions)\n      ? prevThread.latest_reactions.length === nextThread.latest_reactions.length &&\n        prevThread.latest_reactions.every(\n          ({ type }, index) => type === nextThread.latest_reactions?.[index].type,\n        )\n      : prevThread?.latest_reactions === nextThread?.latest_reactions;\n  if (!latestReactionsEqual) return false;\n\n  return true;\n};\n\nconst MemoizedThreadFooter = React.memo(\n  ThreadFooterComponentWithContext,\n  areEqual,\n) as typeof ThreadFooterComponentWithContext;\n\nexport const ThreadFooterComponent = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>() => {\n  const { Message } = useMessagesContext<StreamChatGenerics>();\n  const { thread } = useThreadContext<StreamChatGenerics>();\n\n  return (\n    <MemoizedThreadFooter\n      {...{\n        Message,\n        thread,\n      }}\n    />\n  );\n};\n"],"mappings":"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"}