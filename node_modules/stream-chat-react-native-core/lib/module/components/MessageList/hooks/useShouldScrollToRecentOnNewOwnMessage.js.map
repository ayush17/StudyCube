{"version":3,"names":["_react","require","useShouldScrollToRecentOnNewOwnMessage","rawMessageList","currentUserId","lastFocusedOwnMessageId","useRef","initialFocusRegistered","messagesRef","current","isMyOwnNewMessageRef","length","_lastMessage$user","lastMessage","user","id","useEffect","_lastMessage$user2"],"sources":["useShouldScrollToRecentOnNewOwnMessage.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\nimport type { FormatMessageResponse } from 'stream-chat';\n\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\n\nexport function useShouldScrollToRecentOnNewOwnMessage<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(rawMessageList: FormatMessageResponse<StreamChatGenerics>[], currentUserId?: string) {\n  const lastFocusedOwnMessageId = useRef('');\n  const initialFocusRegistered = useRef(false);\n  const messagesRef = useRef(rawMessageList);\n  messagesRef.current = rawMessageList;\n\n  const isMyOwnNewMessageRef = useRef(() => {\n    if (messagesRef.current && messagesRef.current.length > 0) {\n      const lastMessage = messagesRef.current[messagesRef.current.length - 1];\n\n      if (\n        lastMessage &&\n        lastMessage.user?.id === currentUserId &&\n        lastFocusedOwnMessageId.current !== lastMessage.id\n      ) {\n        lastFocusedOwnMessageId.current = lastMessage.id;\n        return true;\n      }\n    }\n    return false;\n  });\n\n  useEffect(() => {\n    if (rawMessageList && rawMessageList.length) {\n      if (!initialFocusRegistered.current) {\n        initialFocusRegistered.current = true;\n        const lastMessage = rawMessageList[0];\n        if (lastMessage && lastMessage.user?.id === currentUserId) {\n          lastFocusedOwnMessageId.current = lastMessage.id;\n        }\n      }\n    }\n  }, [rawMessageList]);\n\n  return isMyOwnNewMessageRef;\n}\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAMO,SAASC,sCAAsCA,CAEpDC,cAA2D,EAAEC,aAAsB,EAAE;EACrF,IAAMC,uBAAuB,GAAG,IAAAC,aAAM,EAAC,EAAE,CAAC;EAC1C,IAAMC,sBAAsB,GAAG,IAAAD,aAAM,EAAC,KAAK,CAAC;EAC5C,IAAME,WAAW,GAAG,IAAAF,aAAM,EAACH,cAAc,CAAC;EAC1CK,WAAW,CAACC,OAAO,GAAGN,cAAc;EAEpC,IAAMO,oBAAoB,GAAG,IAAAJ,aAAM,EAAC,YAAM;IACxC,IAAIE,WAAW,CAACC,OAAO,IAAID,WAAW,CAACC,OAAO,CAACE,MAAM,GAAG,CAAC,EAAE;MAAA,IAAAC,iBAAA;MACzD,IAAMC,WAAW,GAAGL,WAAW,CAACC,OAAO,CAACD,WAAW,CAACC,OAAO,CAACE,MAAM,GAAG,CAAC,CAAC;MAEvE,IACEE,WAAW,IACX,EAAAD,iBAAA,GAAAC,WAAW,CAACC,IAAI,qBAAhBF,iBAAA,CAAkBG,EAAE,MAAKX,aAAa,IACtCC,uBAAuB,CAACI,OAAO,KAAKI,WAAW,CAACE,EAAE,EAClD;QACAV,uBAAuB,CAACI,OAAO,GAAGI,WAAW,CAACE,EAAE;QAChD,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC,CAAC;EAEF,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAIb,cAAc,IAAIA,cAAc,CAACQ,MAAM,EAAE;MAC3C,IAAI,CAACJ,sBAAsB,CAACE,OAAO,EAAE;QAAA,IAAAQ,kBAAA;QACnCV,sBAAsB,CAACE,OAAO,GAAG,IAAI;QACrC,IAAMI,WAAW,GAAGV,cAAc,CAAC,CAAC,CAAC;QACrC,IAAIU,WAAW,IAAI,EAAAI,kBAAA,GAAAJ,WAAW,CAACC,IAAI,qBAAhBG,kBAAA,CAAkBF,EAAE,MAAKX,aAAa,EAAE;UACzDC,uBAAuB,CAACI,OAAO,GAAGI,WAAW,CAACE,EAAE;QAClD;MACF;IACF;EACF,CAAC,EAAE,CAACZ,cAAc,CAAC,CAAC;EAEpB,OAAOO,oBAAoB;AAC7B"}